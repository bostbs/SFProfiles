@isTest
private class LinkedinSync{
    public static LinkedInProfile profile1;
    public static testmethod void LinkedinSyncTest() {
        IndustryCodes id= new IndustryCodes();
        String jsonRes='{';
        jsonRes+=' "apiStandardProfileRequest": {';
        jsonRes+='"headers": {';
        jsonRes+='  "_total": 1,';
        jsonRes+=' "values": [{';
        jsonRes+='   "name": "x-li-auth-token",';
        jsonRes+='  "value": "name:8OP4"';
        jsonRes+='}]';
        jsonRes+='  },';
        jsonRes+=' "url": "https://api.linkedin.com/v1/people/UiRqjbUpUM"';
        jsonRes+='},';
        jsonRes+='"emailAddress": "linkedinapi@babson.edu",';
        jsonRes+='"firstName": "Babson",';
        jsonRes+='"following": {';
        jsonRes+=' "companies": {';
        jsonRes+='  "_total": 2,';
        jsonRes+='  "values": [';
        jsonRes+=' {';
        jsonRes+='    "id": 6716,';
        jsonRes+='"name": "Babson College"';
        jsonRes+='},';
        jsonRes+=' {';
        jsonRes+='   "id": 697769,';
        jsonRes+='   "name": "Test"';
        jsonRes+=' }';
        jsonRes+=']';
        jsonRes+=' },';
        jsonRes+='"industries": {';
        jsonRes+='  "_total": 2,';
        jsonRes+=' "values": [';
        jsonRes+='   {"id": 80},';
        jsonRes+='   {"id": 68}';
        jsonRes+=' ]';
        jsonRes+=' },';
        jsonRes+='"people": {"_total": 0},';
        jsonRes+='"specialEditions": {"_total": 0}';
        jsonRes+='},';
        jsonRes+='"headline": "SSE at Test",';
        jsonRes+='"id": "UiRqjbUpUM",';
        jsonRes+='"industry": "Higher Education",';
        jsonRes+='"interests": "Golf, Reading, Gardening",';
        jsonRes+='"languages": {';
        jsonRes+=' "_total": 2,';
        jsonRes+='"values": [';
        jsonRes+='  {';
        jsonRes+='     "id": 502406354,';
        jsonRes+='     "language": {"name": "English"}';
        jsonRes+='  },';
        jsonRes+='  {';
        jsonRes+='    "id": 1,';
        jsonRes+='    "language": {"name": "Spanish"}';
        jsonRes+='  }';
        jsonRes+=']';
        jsonRes+='},';
        jsonRes+='"lastModifiedTimestamp": 1474210929674,';
        jsonRes+='"lastName": "AccountAPI",';
        jsonRes+='"location": {';
        jsonRes+='  "country": {"code": "us"},';
        jsonRes+=' "name": "Greater Boston Area"';
        jsonRes+='},';
        jsonRes+='"positions": {';
        jsonRes+='"_total": 4,';
        jsonRes+='"values": [';
        jsonRes+='  {';
        jsonRes+='   "company": {';
        jsonRes+='     "id": 6716,';
        jsonRes+='    "industry": "Higher Education",';
        jsonRes+='    "name": "Babson College",';
        jsonRes+='    "size": "501-1000",';
        jsonRes+='   "type": "Educational"';
        jsonRes+=' },';
        jsonRes+=' "id": 821162101,';
        jsonRes+=' "isCurrent": true,';
        jsonRes+=' "location": {},';
        jsonRes+='"startDate": {';
        jsonRes+='  "month": 3,';
        jsonRes+=' "year": 2015';
        jsonRes+=' },';
        jsonRes+='"summary": "Community Manager",';
        jsonRes+=' "title": "Babson Title1"';
        jsonRes+='},';
        jsonRes+='{';
        jsonRes+=' "company": {';
        jsonRes+='   "id": 697769,';
        jsonRes+='  "industry": "Marketing & Advertising",';
        jsonRes+='  "name": "Test",';
        jsonRes+='  "size": "myself only",';
        jsonRes+=' "type": "Self Employed"';
        jsonRes+='},';
        jsonRes+=' "id": 853355780,';
        jsonRes+=' "isCurrent": true,';
        jsonRes+=' "location": {';
        jsonRes+='  "country": {';
        jsonRes+='   "code": "us",';
        jsonRes+='   "name": "United States"';
        jsonRes+=' },';
        jsonRes+=' "name": "San Francisco Bay Area"';
        jsonRes+=' },';
        jsonRes+='"startDate": {';
        jsonRes+=' "month": 3,';
        jsonRes+='  "year": 2011';
        jsonRes+='  },';
        jsonRes+=' "summary": "Test Desc",';
        jsonRes+=' "title": "SSE"';
        jsonRes+=' },';
        jsonRes+=' {';
        jsonRes+='  "company": {"name": "Test Company"},';
        jsonRes+='  "id": 854489074,';
        jsonRes+=' "isCurrent": true,';
        jsonRes+='  "location": {"name": "Boston, MA"},';
        jsonRes+=' "startDate": {';
        jsonRes+='  "month": 2,';
        jsonRes+='   "year": 2010';
        jsonRes+=' },';
        jsonRes+='  "summary": "This is a test company and test position.",';
        jsonRes+='  "title": "CEO"';
        jsonRes+=' },';
        jsonRes+=' {';
        jsonRes+='  "company": {';
        jsonRes+='  "id": 162479,';
        jsonRes+='  "industry": "Consumer Electronics",';
        jsonRes+='  "name": "Apple",';
        jsonRes+='   "size": "10001+",';
        jsonRes+='   "ticker": "AAPL",';
        jsonRes+='    "type": "Public Company"';
        jsonRes+='  },';
        jsonRes+='"endDate": {';
        jsonRes+='    "month": 7,';
        jsonRes+='   "year": 2016';
        jsonRes+='  },';
        jsonRes+='  "id": 853739613,';
        jsonRes+='  "isCurrent": false,';
        jsonRes+='  "location": {"name": "Addd"},';
        jsonRes+='"startDate": {';
        jsonRes+='    "month": 4,';
        jsonRes+='    "year": 2015';
        jsonRes+='  },';
        jsonRes+=' "summary": "sdasdas",';
        jsonRes+='    "title": "CEO"';
        jsonRes+=' }';
        jsonRes+='  ]';
        jsonRes+='},';
        jsonRes+='"publicProfileUrl": "https://www.linkedin.com/in/babson-accountapi-420269123",';
        jsonRes+='"summary": "My interest is Entrepreneurship and Sustainibility.",';
        jsonRes+='"threeCurrentPositions": {';
        jsonRes+='"_total": 3,';
        jsonRes+='"values": [';
        jsonRes+='{';
        jsonRes+=' "company": {';
        jsonRes+='  "id": 6716,';
        jsonRes+='   "industry": "Higher Education",';
        jsonRes+='   "name": "Babson College",';
        jsonRes+='    "size": "501-1000",';
        jsonRes+='    "type": "Educational"';
        jsonRes+='  },';
        jsonRes+='  "id": 821162101,';
        jsonRes+=' "isCurrent": true,';
        jsonRes+=' "location": {},';
        jsonRes+=' "startDate": {';
        jsonRes+='   "month": 3,';
        jsonRes+='   "year": 2015';
        jsonRes+='  },';
        jsonRes+='  "summary": "Community Manager",';
        jsonRes+='  "title": "Babson Title1"';
        jsonRes+=' },';
        jsonRes+='{';
        jsonRes+='"company": {';
        jsonRes+='   "id": 697769,';
        jsonRes+=' "industry": "Marketing & Advertising",';
        jsonRes+='  "name": "Test",';
        jsonRes+='   "size": "myself only",';
        jsonRes+='   "type": "Self Employed"';
        jsonRes+=' },';
        jsonRes+=' "id": 853355780,';
        jsonRes+=' "isCurrent": true,';
        jsonRes+='"location": {';
        jsonRes+='   "country": {';
        jsonRes+='     "code": "us",';
        jsonRes+='     "name": "United States"';
        jsonRes+='   },';
        jsonRes+='   "name": "San Francisco Bay Area"';
        jsonRes+='  },';
        jsonRes+='  "startDate": {';
        jsonRes+='    "month": 3,';
        jsonRes+='    "year": 2011';
        jsonRes+='  },';
        jsonRes+='  "summary": "Test Desc",';
        jsonRes+='  "title": "SSE"';
        jsonRes+=' },';
        jsonRes+=' {';
        jsonRes+='  "company": {"name": "Test Company"},';
        jsonRes+='  "id": 854489074,';
        jsonRes+='  "isCurrent": true,';
        jsonRes+='  "location": {"name": "Boston, MA"},';
        jsonRes+=' "startDate": {';
        jsonRes+='   "month": 2,';
        jsonRes+='  "year": 2010';
        jsonRes+='},';
        jsonRes+='"summary": "This is a test company and test position.",';
        jsonRes+='  "title": "CEO"';
        jsonRes+='    }';
        jsonRes+='  ]';
        jsonRes+=' },';
        jsonRes+='"threePastPositions": {';
        jsonRes+=' "_total": 1,';
        jsonRes+='"values": [{';
        jsonRes+=' "company": {';
        jsonRes+='  "id": 162479,';
        jsonRes+='    "industry": "Consumer Electronics",';
        jsonRes+='    "name": "Apple",';
        jsonRes+='    "size": "10001+",';
        jsonRes+='    "ticker": "AAPL",';
        jsonRes+='    "type": "Public Company"';
        jsonRes+='  },';
        jsonRes+='  "endDate": {';
        jsonRes+='    "month": 7,';
        jsonRes+='    "year": 2016';
        jsonRes+='  },';
        jsonRes+='"id": 853739613,';
        jsonRes+='   "isCurrent": false,';
        jsonRes+='   "location": {"name": "Addd"},';
        jsonRes+='  "startDate": {';
        jsonRes+='     "month": 4,';
        jsonRes+='     "year": 2015';
        jsonRes+='   },';
        jsonRes+='   "summary": "sdasdas",';
        jsonRes+='   "title": "CEO"';
        jsonRes+='  }]';
        jsonRes+=' }';
        jsonRes+='}';
        
        Contact con =new Contact(LastName = 'portalTestUser',FirstName ='portalFirstName' ,January__c='Home 1', February__c='Home 1', May__c='Home 1', March__c='Home 1', April__c='Home 1', July__c='Home 1', June__c='Home 1', August__c='Home 1', September__c='Home 1', October__c='Home 1', November__c='Home 1', December__c='Home 1');
        insert con;
        
        
        profile1 = LinkedInProfile.parse(jsonRes);
        ApexPages.CurrentPage().getParameters().put('state','test');
        SyncLinkedInProfile sy=new SyncLinkedInProfile();
        sy.authorizeLinkedIn();
        sy.updateUser();
        Test.StartTest();
        sy.syncLinkedIn();
        Test.StopTest();  
        sy.blankCCObject(new CORECONNECT__CC_Community_Content__c());
        sy.requestToken();
        sy.retrieveFollowing(profile1);
        sy.retrieveSkills(profile1);
        sy.retrieveCertifications(profile1);
        sy.retrieveLanguages(profile1);
    }
    
    
}